@startuml MediLink Class Diagram

' Title and Styling
' title MediLink - Telemedicine & Prescription Management System\nClass Diagram

skinparam classAttributeIconSize 0
skinparam class {
    BackgroundColor #F5F5F5
    BackgroundColor<<DTO>> #E3F2FD
    BorderColor Black
    ArrowColor Black
}

package "MediLink.Data" {
    class PatientRecord {
        + PatientID : int
        + FullName : string
        + DOB : DateTime
        + SSN : string
        + MedicalHistory : string
        + CardToken : string
        
        + GetBasicInfo() : (int, string)
        + GenerateReport() : string
        + GetSSN() : string
        + UpdateSSN(newSSN: string) : void
        + ExportAllData() : Dictionary<string, object>
    }
    
    class Doctor {
        + DoctorID : int
        + FullName : string
        + Specialty : string
        + AuthToken : string
        + Password : string
        
        + ValidatePassword(input: string) : bool
        + GetAuthToken() : string
        + GenerateNewToken() : string
        + ResetPassword(newPassword: string) : void
    }
}

package "MediLink.Business" {
    class Prescription {
        + PrescriptionID : Guid
        + PatientID : int
        + DrugName : string
        + Dosage : string
        + DoctorAuthToken : string
        + RawPatientSSN : string
        - _patient : PatientRecord
        - _doctor : Doctor
        
        + Create(patient: PatientRecord, doctor: Doctor) : void
        + ValidateWithSSN(inputSSN: string) : bool
        + DebugPrint() : void
        + GetSensitiveData() : (string, string)
    }
    
    class PrescriptionDTO <<DTO>> {
        + PrescriptionID : Guid
        + PatientID : int
        + DrugName : string
        + Dosage : string
        + PatientSSN : string
        + AuthToken : string
        
        + ToJson() : string
    }
}

package "MediLink.Services" {
    class PharmacyAdapter {
        + PharmacyID : int
        + PharmacyName : string
        - _prescription : Prescription
        
        + FulfillPrescription(prescription: Prescription) : bool
        + VerifyPatientID(ssn: string) : bool
        + LogTransaction(prescriptionId: Guid, timestamp: DateTime) : void
        + BulkVerify(ssnList: List<string>) : int
        - ExecuteQuery(query: string) : bool
    }
}

package "MediLink.Utilities" {
    class AuditLogger {
    }
}

' Relationships
Prescription "1" *-- "1" PatientRecord : contains
Prescription "1" *-- "1" Doctor : contains
Prescription ..> PrescriptionDTO : creates

PharmacyAdapter "1" o-- "1" Prescription : fulfills

' ' Class Descriptions
' note right of PatientRecord
'   Stores patient demographic and
'   medical information including
'   personal health records.
' end note

' note right of Doctor
'   Manages doctor credentials
'   and authentication information
'   for prescription authorization.
' end note

' note bottom of Prescription
'   Central business entity that
'   links patients and doctors for
'   prescription management.
' end note

' note left of PharmacyAdapter
'   Handles prescription fulfillment.
'   Pharmacist receives and marks
'   prescriptions as fulfilled.
' end note

' note bottom of PrescriptionDTO
'   Data transfer object used
'   for pharmacy communication.
' end note

' note left of AuditLogger
'   Utility class for system
'   audit logging.
' end note

@enduml
